<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE niftoolsxml>
<niftoolsxml version="0.7.1.0">

	<xi:include href="../ovl_base/ovl_base.xml" xmlns:xi="http://www.w3.org/2001/XInclude" xpointer="xpointer(*/*)" />

	<compound name="Vector3" size="12" inherit="MemStruct">
		A vector in 3D space (x,y,z).
		<field name="x" type="float">First coordinate.</field>
		<field name="y" type="float">Second coordinate.</field>
		<field name="z" type="float">Third coordinate.</field>
	</compound>

	<compound name="ByteVector3" size="3" inherit="MemStruct">
		A vector in 3D space (x,y,z).
		<field name="x" type="byte">First coordinate.</field>
		<field name="y" type="byte">Second coordinate.</field>
		<field name="z" type="byte">Third coordinate.</field>
	</compound>

	<compound name="ShortVector3" size="6" inherit="MemStruct">
		A vector in 3D space (x,y,z).
		<field name="x" type="short">First coordinate.</field>
		<field name="y" type="short">Second coordinate.</field>
		<field name="z" type="short">Third coordinate.</field>
	</compound>

    <compound name="TrackElementRoot" inherit="MemStruct">
        PC: 32 bytes
        <add name="track_data" type="ArrayPointer" arg="count" template="TrackElementData"/>
        <add name="count" type="uint64" />
        <add name="unk 0" type="uint64" default="0" />
        <add name="unk 1" type="uint64" default="0" />
    </compound>

    <compound name="TrackElementData" inherit="MemStruct">
        PC: 80
        <add name="loop_name" type="Pointer" template="ZString"/>
        <add name="ovl_name" type="Pointer" template="ZString"/>
        <add name="catwalk" type="Pointer" template="TrackElementSub"/>
        <add name="unk 0" type="uint64" />
        <add name="OptionalCatwalk" type="Pointer" template="ZString"/>
        <add name="unk 1" type="uint64" />
        <add name="unk 2" type="ushort" default="0" />
        <add name="unk 3" type="ushort" default="32" />
        <add name="unk 4" type="uint" default="1024" />
        <add name="unk 5" type="uint" default="1"/>
        <add name="unk 6" type="uint" default="1" />
        <add name="unk 7" type="uint64" />
    </compound>

    <compound name="TrackElementSub" inherit="MemStruct">
        PC: 32
        <add name="CatwalkRight_LSM" type="Pointer" template="ZString"/>
        <add name="CatwalkLeft_LSM" type="Pointer" template="ZString"/>
        <add name="CatwalkBoth_LSM" type="Pointer" template="ZString"/>
        <add name="unk 0" type="uint64" />
    </compound>

    <compound name="Key" inherit="MemStruct">
        JWE2: 16 bytes
        <add name="pos" type="ShortVector3" />
        <add name="handle_left" type="ByteVector3" />relative to pos
        <add name="handle_right" type="ByteVector3" />relative to pos
        <add name="handle_scale" type="float" />multiply this with byte vector to get handles
    </compound>

</niftoolsxml>
